import{j as r,_ as fe}from"./index-BzSWj2OB.js";import{r as T,b as as,g as os,c as L}from"./vendor-BNM8eXaP.js";import{s as F,n as jt,a as Nt,c as O,b as te,d as Fe,p as kt,e as St,f as pe,g as ls,h as cs,i as ds,j as Se,k as hs,l as Et,m as us,o as Ye,q as ms,r as fs,t as Tt,u as ps,v as gs,w as Qe,x as xs,y as je,z as bs,A as it,B as vs,C as ys}from"./icons-YHqbKLV1.js";import{u as ws}from"./router-BgX9kjH6.js";const Xe=({isOpen:n,onClose:e})=>{const[t,s]=T.useState(1),[i,a]=T.useState(!1),[o,l]=T.useState(!1),[c,h]=T.useState(!1),[d,m]=T.useState({fullName:"",email:"",phone:"",street:"",city:"",state:"",zipCode:"",inspectionType:"",insuranceCompany:"",policyNumber:"",agencyName:"",agentName:"",agentPhone:"",agentEmail:""}),[u,p]=T.useState({}),x=3,_=["4 Point Inspection","Wind Mitigation","Roof Inspection","Post Claim Inspection"],b=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"];T.useEffect(()=>{n&&(s(1),l(!1),p({}))},[n]),T.useEffect(()=>{if(n){document.body.style.overflow="hidden";const f=()=>{const v=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${v}px`)};return f(),window.addEventListener("resize",f),window.addEventListener("orientationchange",f),()=>{window.removeEventListener("resize",f),window.removeEventListener("orientationchange",f)}}else document.body.style.overflow="unset";return()=>{document.body.style.overflow="unset"}},[n]);const S=f=>{const v=f.replace(/\D/g,"");return v?v.length<=3?`(${v}`:v.length<=6?`(${v.slice(0,3)}) ${v.slice(3)}`:`(${v.slice(0,3)}) ${v.slice(3,6)}-${v.slice(6,10)}`:""},I=f=>f.replace(/\D/g,""),g=f=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f),j=f=>I(f).length===10,P=f=>/^\d{5}(-\d{4})?$/.test(f),E=f=>{const v={};return f===1&&(d.fullName.trim()||(v.fullName="Full name is required"),d.email.trim()?g(d.email)||(v.email="Please enter a valid email address"):v.email="Email is required",d.phone.trim()?j(d.phone)||(v.phone="Please enter a valid 10-digit phone number"):v.phone="Phone number is required",d.street.trim()||(v.street="Street address is required"),d.city.trim()||(v.city="City is required"),d.state.trim()||(v.state="State is required"),d.zipCode.trim()?P(d.zipCode)||(v.zipCode="Please enter a valid ZIP code"):v.zipCode="ZIP code is required"),f===2&&(d.inspectionType||(v.inspectionType="Please select an inspection type")),f===3&&(d.insuranceCompany.trim()||(v.insuranceCompany="Insurance company is required"),d.agencyName.trim()||(v.agencyName="Agency name is required"),d.agentName.trim()||(v.agentName="Agent name is required"),d.agentPhone.trim()?j(d.agentPhone)||(v.agentPhone="Please enter a valid 10-digit phone number"):v.agentPhone="Agent phone is required",d.agentEmail.trim()?g(d.agentEmail)||(v.agentEmail="Please enter a valid email address"):v.agentEmail="Agent email is required"),p(v),Object.keys(v).length===0},N=(f,v)=>{if(f==="phone"||f==="agentPhone"){const ie=S(v);m(is=>({...is,[f]:ie}))}else m(ie=>({...ie,[f]:v}));u[f]&&p(ie=>({...ie,[f]:""}))},ss=()=>{E(t)&&s(f=>Math.min(f+1,x))},rs=()=>{s(f=>Math.max(f-1,1))},ns=async()=>{if(E(t)){a(!0);try{const f={...d,phone:I(d.phone),agentPhone:I(d.agentPhone)};console.log("Submitting inspection request:",f),await new Promise(v=>setTimeout(v,2e3)),l(!0)}catch(f){console.error("Error submitting form:",f)}finally{a(!1)}}},nt=()=>{i||(e(),setTimeout(()=>{m({fullName:"",email:"",phone:"",street:"",city:"",state:"",zipCode:"",inspectionType:"",insuranceCompany:"",policyNumber:"",agencyName:"",agentName:"",agentPhone:"",agentEmail:""}),s(1),l(!1),p({})},300))},Oe=f=>{h(!0),setTimeout(()=>h(!1),150),f()};return n?o?r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8 text-center animate-fade-in",children:[r.jsx("div",{className:"bg-green-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(F,{className:"w-10 h-10 text-green-600"})}),r.jsx("h3",{className:"text-2xl font-bold text-primary-700 mb-4",children:"Request Submitted!"}),r.jsx("p",{className:"text-neutral-600 mb-8 leading-relaxed",children:"Thank you for your inspection request. We'll contact you within 24 hours to schedule your inspection."}),r.jsx("button",{onClick:nt,className:"bg-accent text-white px-8 py-3 rounded-xl font-semibold hover:bg-accent-600 transition-colors duration-200 min-h-[44px] min-w-[44px]",children:"Close"})]})}):r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-2 sm:p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl sm:rounded-3xl shadow-2xl w-full max-w-2xl flex flex-col animate-fade-in",style:{maxHeight:"calc(var(--vh, 1vh) * 95)",height:"auto"},children:[r.jsxs("div",{className:"bg-gradient-to-r from-primary-700 to-primary-600 text-white p-4 sm:p-6 relative flex-shrink-0 rounded-t-2xl sm:rounded-t-3xl",children:[r.jsx("button",{onClick:nt,disabled:i,className:"absolute top-3 right-3 sm:top-4 sm:right-4 p-2 hover:bg-white/10 rounded-lg transition-colors duration-200 disabled:opacity-50 min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":"Close modal",children:r.jsx(jt,{className:"w-6 h-6"})}),r.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 pr-12",children:"Request Inspection"}),r.jsx("div",{className:"flex items-center justify-center",children:[1,2,3].map((f,v)=>r.jsxs(as.Fragment,{children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold transition-all duration-300 ${f<t?"bg-accent text-white":f===t?"bg-white text-primary-700":"bg-white/20 text-white/60"}`,children:f<t?r.jsx(F,{className:"w-5 h-5"}):f}),v<2&&r.jsx("div",{className:`w-16 h-1 mx-2 rounded transition-all duration-300 ${f<t?"bg-accent":"bg-white/20"}`})]},f))}),r.jsx("div",{className:"mt-4 text-center",children:r.jsxs("p",{className:"text-primary-100 text-sm",children:["Step ",t," of ",x,": ",t===1?"Personal Information":t===2?"Inspection Details":"Insurance Information"]})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:r.jsxs("div",{className:"p-4 sm:p-6 pb-24 sm:pb-32",children:[t===1&&r.jsxs("div",{className:"space-y-4 sm:space-y-6 animate-slide-up",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[r.jsx("div",{className:"bg-accent/10 p-3 rounded-lg",children:r.jsx(Nt,{className:"w-6 h-6 text-accent"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-primary-700",children:"Personal Information"}),r.jsx("p",{className:"text-neutral-600 text-sm",children:"Please provide your contact details"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"fullName",className:"block text-sm font-semibold text-primary-700 mb-2",children:"Full Name *"}),r.jsx("input",{type:"text",id:"fullName",value:d.fullName,onChange:f=>N("fullName",f.target.value),className:`w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-accent/20 focus:border-accent transition-all duration-300 text-base ${u.fullName?"border-red-300":"border-neutral-200"}`,placeholder:"Enter your full name"}),u.fullName&&r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-red-600 text-sm",children:[r.jsx(O,{className:"w-4 h-4"}),u.fullName]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"email",className:"block text-sm font-semibold text-primary-700 mb-2",children:[r.jsx(te,{className:"w-4 h-4 inline mr-2"}),"Email Address *"]}),r.jsx("input",{type:"email",id:"email",value:d.email,onChange:f=>N("email",f.target.value),className:`w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-accent/20 focus:border-accent transition-all duration-300 text-base ${u.email?"border-red-300":"border-neutral-200"}`,placeholder:"your.email@example.com"}),u.email&&r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-red-600 text-sm",children:[r.jsx(O,{className:"w-4 h-4"}),u.email]})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"phone",className:"block text-sm font-semibold text-primary-700 mb-2",children:[r.jsx(Fe,{className:"w-4 h-4 inline mr-2"}),"Phone Number *"]}),r.jsx("input",{type:"tel",id:"phone",value:d.phone,onChange:f=>N("phone",f.target.value),className:`w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-accent/20 focus:border-accent transition-all duration-300 text-base ${u.phone?"border-red-300":"border-neutral-200"}`,placeholder:"(555) 123-4567",maxLength:14}),u.phone&&r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-red-600 text-sm",children:[r.jsx(O,{className:"w-4 h-4"}),u.phone]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"street",className:"block text-sm font-semibold text-primary-700 mb-2",children:[r.jsx(kt,{className:"w-4 h-4 inline mr-2"}),"Street Address *"]}),r.jsx("input",{type:"text",id:"street",value:d.street,onChange:f=>N("street",f.target.value),className:`w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-accent/20 focus:border-accent transition-all duration-300 text-base ${u.street?"border-red-300":"border-neutral-200"}`,placeholder:"123 Main Street"}),u.street&&r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-red-600 text-sm",children:[r.jsx(O,{className:"w-4 h-4"}),u.street]})]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[r.jsx("label",{htmlFor:"city",className:"block text-sm font-semibold text-primary-700 mb-2",children:"City *"}),r.jsx("input",{type:"text",id:"city",value:d.city,onChange:f=>N("city",f.target.value),className:`w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-accent/20 focus:border-accent transition-all duration-300 text-base ${u.city?"border-red-300":"border-neutral-200"}`,placeholder:"City"}),u.city&&r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-red-600 text-sm",children:[r.jsx(O,{className:"w-4 h-4"}),u.city]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"state",className:"block text-sm font-semibold text-primary-700 mb-2",children:"State *"}),r.jsxs("select",{id:"state",value:d.state,onChange:f=>N("state",f.target.value),className:`w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-accent/20 focus:border-accent transition-all duration-300 text-base ${u.state?"border-red-300":"border-neutral-200"}`,children:[r.jsx("option",{value:"",children:"State"}),b.map(f=>r.jsx("option",{value:f,children:f},f))]}),u.state&&r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-red-600 text-sm",children:[r.jsx(O,{className:"w-4 h-4"}),u.state]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"zipCode",className:"block text-sm font-semibold text-primary-700 mb-2",children:"ZIP Code *"}),r.jsx("input",{type:"text",id:"zipCode",value:d.zipCode,onChange:f=>N("zipCode",f.target.value),className:`w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-accent/20 focus:border-accent transition-all duration-300 text-base ${u.zipCode?"border-red-300":"border-neutral-200"}`,placeholder:"12345"}),u.zipCode&&r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-red-600 text-sm",children:[r.jsx(O,{className:"w-4 h-4"}),u.zipCode]})]})]})]}),t===2&&r.jsxs("div",{className:"space-y-4 sm:space-y-6 animate-slide-up",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[r.jsx("div",{className:"bg-accent/10 p-3 rounded-lg",children:r.jsx(St,{className:"w-6 h-6 text-accent"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-primary-700",children:"Inspection Details"}),r.jsx("p",{className:"text-neutral-600 text-sm",children:"Select the type of inspection you need"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"inspectionType",className:"block text-sm font-semibold text-primary-700 mb-2",children:"Inspection Type *"}),r.jsxs("select",{id:"inspectionType",value:d.inspectionType,onChange:f=>N("inspectionType",f.target.value),className:`w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-accent/20 focus:border-accent transition-all duration-300 text-base ${u.inspectionType?"border-red-300":"border-neutral-200"}`,children:[r.jsx("option",{value:"",children:"Select an inspection type"}),_.map(f=>r.jsx("option",{value:f,children:f},f))]}),u.inspectionType&&r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-red-600 text-sm",children:[r.jsx(O,{className:"w-4 h-4"}),u.inspectionType]})]}),r.jsxs("div",{className:"bg-neutral-50 rounded-xl p-4 sm:p-6",children:[r.jsx("h4",{className:"font-semibold text-primary-700 mb-4",children:"Inspection Types Explained:"}),r.jsxs("div",{className:"space-y-3 text-sm text-neutral-600",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-primary-700",children:"4 Point Inspection:"})," Comprehensive assessment of electrical, plumbing, HVAC, and roofing systems."]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-primary-700",children:"Wind Mitigation:"})," Evaluation of features that help protect your home from wind damage."]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-primary-700",children:"Roof Inspection:"})," Detailed examination of roof condition, materials, and potential issues."]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-primary-700",children:"Post Claim Inspection:"})," Assessment following an insurance claim to document damage and repairs."]})]})]})]}),t===3&&r.jsxs("div",{className:"space-y-4 sm:space-y-6 animate-slide-up",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[r.jsx("div",{className:"bg-accent/10 p-3 rounded-lg",children:r.jsx(pe,{className:"w-6 h-6 text-accent"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-primary-700",children:"Insurance Information"}),r.jsx("p",{className:"text-neutral-600 text-sm",children:"Provide your insurance details for coordination"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"insuranceCompany",className:"block text-sm font-semibold text-primary-700 mb-2",children:[r.jsx(ls,{className:"w-4 h-4 inline mr-2"}),"Insurance Company *"]}),r.jsx("input",{type:"text",id:"insuranceCompany",value:d.insuranceCompany,onChange:f=>N("insuranceCompany",f.target.value),className:`w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-accent/20 focus:border-accent transition-all duration-300 text-base ${u.insuranceCompany?"border-red-300":"border-neutral-200"}`,placeholder:"State Farm, Allstate, etc."}),u.insuranceCompany&&r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-red-600 text-sm",children:[r.jsx(O,{className:"w-4 h-4"}),u.insuranceCompany]})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"policyNumber",className:"block text-sm font-semibold text-primary-700 mb-2",children:[r.jsx(cs,{className:"w-4 h-4 inline mr-2"}),"Policy Number ",r.jsx("span",{className:"text-neutral-500 font-normal",children:"(optional)"})]}),r.jsx("input",{type:"text",id:"policyNumber",value:d.policyNumber,onChange:f=>N("policyNumber",f.target.value),className:"w-full px-4 py-4 border-2 border-neutral-200 rounded-xl focus:ring-4 focus:ring-accent/20 focus:border-accent transition-all duration-300 text-base",placeholder:"Policy number (if available)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"agencyName",className:"block text-sm font-semibold text-primary-700 mb-2",children:"Insurance Agency Name *"}),r.jsx("input",{type:"text",id:"agencyName",value:d.agencyName,onChange:f=>N("agencyName",f.target.value),className:`w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-accent/20 focus:border-accent transition-all duration-300 text-base ${u.agencyName?"border-red-300":"border-neutral-200"}`,placeholder:"Agency name"}),u.agencyName&&r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-red-600 text-sm",children:[r.jsx(O,{className:"w-4 h-4"}),u.agencyName]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"agentName",className:"block text-sm font-semibold text-primary-700 mb-2",children:"Agent's Full Name *"}),r.jsx("input",{type:"text",id:"agentName",value:d.agentName,onChange:f=>N("agentName",f.target.value),className:`w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-accent/20 focus:border-accent transition-all duration-300 text-base ${u.agentName?"border-red-300":"border-neutral-200"}`,placeholder:"Agent's full name"}),u.agentName&&r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-red-600 text-sm",children:[r.jsx(O,{className:"w-4 h-4"}),u.agentName]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"agentPhone",className:"block text-sm font-semibold text-primary-700 mb-2",children:[r.jsx(Fe,{className:"w-4 h-4 inline mr-2"}),"Agent's Phone *"]}),r.jsx("input",{type:"tel",id:"agentPhone",value:d.agentPhone,onChange:f=>N("agentPhone",f.target.value),className:`w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-accent/20 focus:border-accent transition-all duration-300 text-base ${u.agentPhone?"border-red-300":"border-neutral-200"}`,placeholder:"(555) 123-4567",maxLength:14}),u.agentPhone&&r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-red-600 text-sm",children:[r.jsx(O,{className:"w-4 h-4"}),u.agentPhone]})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"agentEmail",className:"block text-sm font-semibold text-primary-700 mb-2",children:[r.jsx(te,{className:"w-4 h-4 inline mr-2"}),"Agent's Email *"]}),r.jsx("input",{type:"email",id:"agentEmail",value:d.agentEmail,onChange:f=>N("agentEmail",f.target.value),className:`w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-accent/20 focus:border-accent transition-all duration-300 text-base ${u.agentEmail?"border-red-300":"border-neutral-200"}`,placeholder:"agent@agency.com"}),u.agentEmail&&r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-red-600 text-sm",children:[r.jsx(O,{className:"w-4 h-4"}),u.agentEmail]})]})]})]})]})}),r.jsxs("div",{className:"bg-gradient-to-r from-neutral-50 to-white border-t border-neutral-200 px-4 sm:px-6 py-6 flex justify-between items-center rounded-b-2xl sm:rounded-b-3xl shadow-lg",children:[r.jsxs("button",{onClick:()=>Oe(rs),disabled:t===1||i,className:`
              group flex items-center justify-center gap-3 px-6 py-4 
              text-neutral-600 hover:text-primary-700 active:text-primary-800
              transition-all duration-300 
              disabled:opacity-40 disabled:cursor-not-allowed
              min-h-[52px] min-w-[52px]
              rounded-xl hover:bg-neutral-100 active:bg-neutral-200
              font-semibold text-base
              border-2 border-transparent hover:border-neutral-200
              ${c&&t>1?"scale-95 bg-neutral-200":""}
              ${t===1?"invisible":"visible"}
            `,"aria-label":"Go to previous step",children:[r.jsx(ds,{className:"w-5 h-5 flex-shrink-0 group-hover:transform group-hover:-translate-x-1 transition-transform duration-200"}),r.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),r.jsx("div",{className:"flex flex-col items-center gap-3",children:r.jsx("div",{className:"flex gap-2",children:[1,2,3].map(f=>r.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${f===t?"bg-accent w-8 shadow-lg":f<t?"bg-accent/70 w-6":"bg-neutral-300 w-4"}`},f))})}),t<x?r.jsxs("button",{onClick:()=>Oe(ss),disabled:i,className:`
                group flex items-center justify-center gap-3 
                bg-gradient-to-r from-accent to-accent-600 
                hover:from-accent-600 hover:to-accent-700 
                active:from-accent-700 active:to-accent-800
                text-white px-8 py-4 
                rounded-xl font-bold text-base
                transition-all duration-300 
                disabled:opacity-50 disabled:cursor-not-allowed
                min-h-[52px] min-w-[52px]
                shadow-lg hover:shadow-xl active:shadow-md
                transform hover:scale-105 active:scale-95
                border-2 border-accent-600 hover:border-accent-700
                ${c?"scale-95":""}
              `,style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},"aria-label":"Continue to next step",children:[r.jsx("span",{className:"hidden sm:inline",children:"Continue"}),r.jsx("span",{className:"sm:hidden",children:"Next"}),r.jsx(Se,{className:"w-5 h-5 flex-shrink-0 group-hover:transform group-hover:translate-x-1 transition-transform duration-200"})]}):r.jsx("button",{onClick:()=>Oe(ns),disabled:i,className:`
                group flex items-center justify-center gap-3 
                bg-gradient-to-r from-green-600 to-green-700 
                hover:from-green-700 hover:to-green-800 
                active:from-green-800 active:to-green-900
                text-white px-8 py-4 
                rounded-xl font-bold text-base
                transition-all duration-300 
                disabled:opacity-50 disabled:cursor-not-allowed
                min-h-[52px] min-w-[52px]
                shadow-lg hover:shadow-xl active:shadow-md
                transform hover:scale-105 active:scale-95
                border-2 border-green-700 hover:border-green-800
                ${c?"scale-95":""}
                ${i?"cursor-wait":""}
              `,style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},"aria-label":"Submit inspection request",children:i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white flex-shrink-0"}),r.jsx("span",{className:"hidden sm:inline",children:"Submitting..."}),r.jsx("span",{className:"sm:hidden",children:"Sending..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"hidden sm:inline",children:"Submit Request"}),r.jsx("span",{className:"sm:hidden",children:"Submit"}),r.jsx(F,{className:"w-5 h-5 flex-shrink-0 group-hover:transform group-hover:scale-110 transition-transform duration-200"})]})})]})]})}):null},It=({src:n,alt:e,className:t="",style:s,loading:i="lazy",priority:a=!1})=>r.jsx("img",{src:n,alt:e,className:t,style:s,loading:a?"eager":i,decoding:"async",...a&&{fetchPriority:"high"}}),_s=()=>{const[n,e]=T.useState(!1),[t,s]=T.useState(!0),[i,a]=T.useState(!1),o=T.useRef(0),l=T.useRef(!1),c=T.useCallback(()=>{const u=window.scrollY;u<10?s(!0):u>o.current&&u>100?(s(!1),e(!1)):u<o.current&&s(!0),o.current=u,l.current=!1},[]);T.useEffect(()=>{const u=()=>{l.current||(requestAnimationFrame(c),l.current=!0)};return window.addEventListener("scroll",u,{passive:!0}),()=>window.removeEventListener("scroll",u)},[c]);const h=u=>{const p=document.getElementById(u);p&&p.scrollIntoView({behavior:"smooth"}),e(!1)},d=(u,p)=>{u.preventDefault(),h(p)},m=()=>{a(!0),e(!1)};return r.jsxs(r.Fragment,{children:[r.jsx("header",{className:`bg-white/95 backdrop-blur-sm shadow-sm fixed w-full top-0 z-50 transition-transform duration-300 ease-in-out ${t?"translate-y-0":"-translate-y-full"}`,children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"flex justify-between items-center h-16",children:[r.jsx("div",{className:"flex items-center",children:r.jsx(It,{src:"/Inspectana Web Logo.png",alt:"Inspectana Logo",className:"h-8 w-auto",priority:!0})}),r.jsxs("nav",{className:"hidden md:flex absolute left-1/2 transform -translate-x-1/2 space-x-8",children:[r.jsx("a",{href:"#problem",onClick:u=>d(u,"problem"),className:"text-neutral-600 hover:text-primary-700 transition-colors duration-200",children:"Challenge"}),r.jsx("a",{href:"#solution",onClick:u=>d(u,"solution"),className:"text-neutral-600 hover:text-primary-700 transition-colors duration-200",children:"Platform"}),r.jsx("a",{href:"#benefits",onClick:u=>d(u,"benefits"),className:"text-neutral-600 hover:text-primary-700 transition-colors duration-200",children:"Benefits"})]}),r.jsx("div",{className:"hidden md:block",children:r.jsx("button",{onClick:m,className:"bg-accent text-white px-4 py-2 rounded-lg hover:bg-accent-600 transition-colors duration-200",children:"Request Inspection"})}),r.jsx("div",{className:"md:hidden",children:r.jsx("button",{onClick:()=>e(!n),className:"text-neutral-600 hover:text-primary-700",children:n?r.jsx(jt,{className:"w-6 h-6"}):r.jsx(hs,{className:"w-6 h-6"})})})]}),n&&r.jsx("div",{className:"md:hidden",children:r.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-white/95 backdrop-blur-sm border-t",children:[r.jsx("a",{href:"#problem",onClick:u=>d(u,"problem"),className:"text-neutral-600 hover:text-primary-700 block px-3 py-2 w-full text-left",children:"Challenge"}),r.jsx("a",{href:"#solution",onClick:u=>d(u,"solution"),className:"text-neutral-600 hover:text-primary-700 block px-3 py-2 w-full text-left",children:"Platform"}),r.jsx("a",{href:"#benefits",onClick:u=>d(u,"benefits"),className:"text-neutral-600 hover:text-primary-700 block px-3 py-2 w-full text-left",children:"Benefits"}),r.jsx("button",{onClick:m,className:"bg-accent text-white block px-3 py-2 rounded-lg hover:bg-accent-600 transition-colors duration-200 w-full text-left",children:"Request Inspection"})]})})]})}),r.jsx(Xe,{isOpen:i,onClose:()=>a(!1)})]})},js=()=>{const[n,e]=T.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsxs("section",{className:"pt-16 bg-gradient-to-br from-primary-700 via-primary-600 to-primary-500 text-white relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat opacity-25",style:{backgroundImage:"url(https://images.pexels.com/photos/442587/pexels-photo-442587.jpeg?auto=compress&cs=tinysrgb&w=1920&h=1080&fit=crop)"}}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary-700/85 via-primary-600/75 to-primary-500/85"}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 relative z-10",children:r.jsx("div",{className:"flex justify-center items-center",children:r.jsxs("div",{className:"animate-slide-up text-center max-w-4xl",children:[r.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold mb-6 leading-tight",children:[r.jsx("span",{className:"block mb-2",children:"Automate. Analyze."}),r.jsx("span",{className:"text-accent text-5xl md:text-6xl lg:text-7xl font-extrabold tracking-tight",children:"Inspect Smarter"})]}),r.jsx("p",{className:"text-xl mb-8 text-primary-100",children:"Revolutionize your inspection workflow with cutting-edge drone technology. Streamline 4 Point Inspections, Wind Mitigations, Roof Inspections, and Post-Claim Inspections with high-resolution imagery and detailed reporting for faster, more accurate results."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-8 justify-center",children:[r.jsxs("button",{onClick:()=>e(!0),className:"bg-accent text-white px-8 py-4 rounded-lg font-semibold text-lg hover:bg-accent-600 transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2",children:["Request Inspection",r.jsx(Se,{className:"w-5 h-5"})]}),r.jsx("a",{href:"#solution",onClick:t=>{t.preventDefault(),document.getElementById("solution")?.scrollIntoView({behavior:"smooth"})},className:"border-2 border-white text-white px-8 py-4 rounded-lg font-semibold text-lg hover:bg-white hover:text-primary-700 transition-all duration-300",children:"View Platform"})]}),r.jsxs("div",{className:"flex items-center gap-6 text-sm text-primary-100 justify-center",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(pe,{className:"w-4 h-4"}),r.jsx("span",{children:"Enterprise Grade"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Et,{className:"w-4 h-4"}),r.jsx("span",{children:"AI-Powered Analysis"})]})]})]})})})]}),r.jsx(Xe,{isOpen:n,onClose:()=>e(!1)})]})},Ns=()=>{const n=[{icon:r.jsx(Ye,{className:"w-8 h-8 text-accent"}),title:"Manual Processing Bottlenecks",description:"Traditional inspection workflows require extensive manual review, data entry, and report generation, creating delays in claim processing and customer service."},{icon:r.jsx(ms,{className:"w-8 h-8 text-accent"}),title:"High Operational Costs",description:"Manual inspections involve travel expenses, inspector fees, and administrative overhead that significantly impact operational efficiency and profitability."},{icon:r.jsx(O,{className:"w-8 h-8 text-accent"}),title:"Inconsistent Data Quality",description:"Human-dependent inspections result in variable data quality, subjective assessments, and incomplete documentation that affects underwriting accuracy."},{icon:r.jsx(fs,{className:"w-8 h-8 text-accent"}),title:"Limited Scalability",description:"Traditional inspection methods cannot scale efficiently with growing policy volumes, creating capacity constraints and service delays."}];return r.jsx("section",{id:"problem",className:"py-20 bg-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16 animate-slide-up",children:[r.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-primary-700 mb-6",children:"The Insurance Inspection Challenge"}),r.jsx("p",{className:"text-xl text-neutral-600 max-w-3xl mx-auto",children:"Insurance companies face mounting pressure to process inspections faster while maintaining accuracy and controlling costs. Traditional methods are failing to meet modern demands for efficiency and scalability."})]}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-2 gap-8 mb-12",children:n.map((e,t)=>r.jsx("div",{className:"bg-neutral-50 rounded-xl p-8 hover:shadow-lg transition-all duration-300 animate-fade-in",style:{animationDelay:`${t*.1}s`},children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"bg-white p-3 rounded-lg shadow-sm flex-shrink-0",children:e.icon}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold text-primary-700 mb-3",children:e.title}),r.jsx("p",{className:"text-neutral-600 leading-relaxed",children:e.description})]})]})},t))}),r.jsxs("div",{className:"bg-gradient-to-r from-accent/10 to-primary-700/5 rounded-2xl p-8 text-center",children:[r.jsx("div",{className:"flex items-center justify-center mb-4",children:r.jsx(us,{className:"w-12 h-12 text-accent"})}),r.jsx("h3",{className:"text-2xl font-bold text-primary-700 mb-4",children:"Industry Impact"}),r.jsxs("p",{className:"text-lg text-neutral-600 max-w-2xl mx-auto",children:["Insurance companies spend up to ",r.jsx("span",{className:"font-bold text-accent",children:"40% of their operational budget"})," on inefficient inspection processes, while customer satisfaction suffers from delays and inconsistent service delivery."]})]})]})})},ks=()=>{const n=[{icon:r.jsx(Tt,{className:"w-10 h-10 text-accent"}),title:"Automated Drone Operations",description:"Intelligent flight planning and autonomous data collection for 4 Point, Wind Mitigation, Roof, and Post Claim inspections with minimal human intervention."},{icon:r.jsx(ps,{className:"w-10 h-10 text-accent"}),title:"AI-Powered Analysis",description:"Machine learning algorithms automatically detect damage, assess conditions, and generate accurate measurements with consistent, objective results."},{icon:r.jsx(gs,{className:"w-10 h-10 text-accent"}),title:"Real-Time Dashboards",description:"Comprehensive analytics platform with live inspection tracking, performance metrics, and business intelligence for operational optimization."},{icon:r.jsx(St,{className:"w-10 h-10 text-accent"}),title:"Automated Reporting",description:"Generate standardized inspection reports instantly with photos, measurements, and recommendations that meet insurance industry requirements."},{icon:r.jsx(Qe,{className:"w-10 h-10 text-accent"}),title:"Multi-Sensor Integration",description:"Combine visual, thermal, and LiDAR data for comprehensive property assessment with enhanced accuracy and detailed documentation."},{icon:r.jsx(pe,{className:"w-10 h-10 text-accent"}),title:"Enterprise Security",description:"Bank-level encryption, secure cloud storage, and compliance with insurance industry regulations and data protection standards."}];return r.jsx("section",{id:"solution",className:"py-20 bg-neutral-100",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16 animate-slide-up",children:[r.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-primary-700 mb-6",children:"The Inspectana Platform"}),r.jsx("p",{className:"text-xl text-neutral-600 max-w-3xl mx-auto",children:"Our comprehensive software platform transforms insurance inspections with intelligent automation, AI-powered analysis, and seamless integration into your existing workflow systems."})]}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16",children:n.map((e,t)=>r.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 animate-fade-in",style:{animationDelay:`${t*.1}s`},children:[r.jsx("div",{className:"bg-accent/10 w-16 h-16 rounded-lg flex items-center justify-center mb-6",children:e.icon}),r.jsx("h3",{className:"text-xl font-semibold text-primary-700 mb-4",children:e.title}),r.jsx("p",{className:"text-neutral-600 leading-relaxed",children:e.description})]},t))}),r.jsxs("div",{className:"bg-gradient-to-r from-primary-700 to-primary-600 rounded-2xl p-8 md:p-12 text-white text-center",children:[r.jsx("h3",{className:"text-2xl md:text-3xl font-bold mb-6",children:"Streamlined Workflow Integration"}),r.jsxs("div",{className:"grid md:grid-cols-4 gap-6 text-center",children:[r.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[r.jsx("div",{className:"bg-accent w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("span",{className:"text-white font-bold",children:"1"})}),r.jsx("h4",{className:"font-semibold mb-2",children:"Deploy"}),r.jsx("p",{className:"text-sm text-primary-100",children:"Automated drone deployment and data collection"})]}),r.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[r.jsx("div",{className:"bg-accent w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("span",{className:"text-white font-bold",children:"2"})}),r.jsx("h4",{className:"font-semibold mb-2",children:"Analyze"}),r.jsx("p",{className:"text-sm text-primary-100",children:"AI-powered analysis and damage detection"})]}),r.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[r.jsx("div",{className:"bg-accent w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("span",{className:"text-white font-bold",children:"3"})}),r.jsx("h4",{className:"font-semibold mb-2",children:"Generate"}),r.jsx("p",{className:"text-sm text-primary-100",children:"Automated report generation and validation"})]}),r.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[r.jsx("div",{className:"bg-accent w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("span",{className:"text-white font-bold",children:"4"})}),r.jsx("h4",{className:"font-semibold mb-2",children:"Integrate"}),r.jsx("p",{className:"text-sm text-primary-100",children:"Seamless integration with existing systems"})]})]})]})]})})},Ss=()=>{const n=[{icon:r.jsx(xs,{className:"w-8 h-8 text-accent"}),title:"87% Cost Reduction",description:"Eliminate expensive manual inspections and reduce operational overhead while increasing inspection frequency and coverage.",metric:"Average annual savings: $2.4M"},{icon:r.jsx(Ye,{className:"w-8 h-8 text-accent"}),title:"10x Faster Processing",description:"Complete comprehensive inspections in hours instead of weeks with automated workflows and instant report generation.",metric:"Time to insight: <2 hours"},{icon:r.jsx(pe,{className:"w-8 h-8 text-accent"}),title:"99.9% Accuracy Improvement",description:"AI-powered analysis delivers consistent, objective assessments that eliminate human error and subjective bias.",metric:"Detection accuracy: 99.9%"},{icon:r.jsx(Qe,{className:"w-8 h-8 text-accent"}),title:"Unlimited Scalability",description:"Process thousands of inspections simultaneously without capacity constraints or quality degradation.",metric:"Concurrent inspections: 1000+"}],e=["Seamless integration with existing insurance management systems","Real-time inspection tracking and progress monitoring","Comprehensive audit trails for regulatory compliance","Automated quality assurance and validation processes","Advanced analytics for risk assessment and pricing optimization","24/7 platform availability with enterprise-grade support"];return r.jsx("section",{id:"benefits",className:"py-20 bg-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16 animate-slide-up",children:[r.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-primary-700 mb-6",children:"Measurable Business Impact"}),r.jsx("p",{className:"text-xl text-neutral-600 max-w-3xl mx-auto",children:"Insurance companies using Inspectana achieve significant operational improvements and cost savings within months of implementation, transforming their inspection capabilities."})]}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-2 gap-8 mb-16",children:n.map((t,s)=>r.jsx("div",{className:"bg-gradient-to-br from-neutral-50 to-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 animate-fade-in",style:{animationDelay:`${s*.1}s`},children:r.jsxs("div",{className:"flex items-start gap-6",children:[r.jsx("div",{className:"bg-accent/10 p-4 rounded-lg flex-shrink-0",children:t.icon}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-primary-700 mb-3",children:t.title}),r.jsx("p",{className:"text-neutral-600 mb-4 leading-relaxed",children:t.description}),r.jsx("div",{className:"bg-accent/5 rounded-lg p-3",children:r.jsx("p",{className:"text-sm font-semibold text-accent",children:t.metric})})]})]})},s))}),r.jsxs("div",{className:"bg-neutral-50 rounded-2xl p-8 md:p-12",children:[r.jsxs("div",{className:"text-center mb-10",children:[r.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-primary-700 mb-4",children:"Platform Capabilities"}),r.jsx("p",{className:"text-lg text-neutral-600",children:"Beyond cost savings and efficiency gains, Inspectana delivers comprehensive value across your insurance operations."})]}),r.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:e.map((t,s)=>r.jsxs("div",{className:"flex items-start gap-4 animate-fade-in",style:{animationDelay:`${s*.1}s`},children:[r.jsx(F,{className:"w-6 h-6 text-accent flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-neutral-700",children:t})]},s))})]}),r.jsxs("div",{className:"mt-16 bg-gradient-to-r from-accent to-accent-600 rounded-2xl p-8 md:p-12 text-white text-center",children:[r.jsx("h3",{className:"text-2xl md:text-3xl font-bold mb-6",children:"ROI Calculator"}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-4xl font-bold mb-2",children:"6-12"}),r.jsx("div",{className:"text-accent-100",children:"Months to ROI"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-4xl font-bold mb-2",children:"$2.4M"}),r.jsx("div",{className:"text-accent-100",children:"Average Annual Savings"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-4xl font-bold mb-2",children:"350%"}),r.jsx("div",{className:"text-accent-100",children:"3-Year ROI"})]})]})]})]})})},Es=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>fe(async()=>{const{default:s}=await Promise.resolve().then(()=>re);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Ze extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Ts extends Ze{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class at extends Ze{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ot extends Ze{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Me;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Me||(Me={}));var Is=function(n,e,t,s){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function l(d){try{h(s.next(d))}catch(m){o(m)}}function c(d){try{h(s.throw(d))}catch(m){o(m)}}function h(d){d.done?a(d.value):i(d.value).then(l,c)}h((s=s.apply(n,e||[])).next())})};class Ps{constructor(e,{headers:t={},customFetch:s,region:i=Me.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=Es(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return Is(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:o}=t;let l={},{region:c}=t;c||(c=this.region);const h=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,h.searchParams.set("forceFunctionRegion",c));let d;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const m=yield this.fetch(h.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:d}).catch(_=>{throw new Ts(_)}),u=m.headers.get("x-relay-error");if(u&&u==="true")throw new at(m);if(!m.ok)throw new ot(m);let p=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),x;return p==="application/json"?x=yield m.json():p==="application/octet-stream"?x=yield m.blob():p==="text/event-stream"?x=m:p==="multipart/form-data"?x=yield m.formData():x=yield m.text(),{data:x,error:null,response:m}}catch(i){return{data:null,error:i,response:i instanceof ot||i instanceof at?i.context:void 0}}})}}var R={},et={},Ee={},ge={},Te={},Ie={},Cs=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},se=Cs();const $s=se.fetch,Pt=se.fetch.bind(se),Ct=se.Headers,As=se.Request,Os=se.Response,re=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ct,Request:As,Response:Os,default:Pt,fetch:$s},Symbol.toStringTag,{value:"Module"})),Rs=os(re);var Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});let Ls=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Pe.default=Ls;var $t=L&&L.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ie,"__esModule",{value:!0});const Us=$t(Rs),Ds=$t(Pe);let qs=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Us.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let i=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c;let h=null,d=null,m=null,u=a.status,p=a.statusText;if(a.ok){if(this.method!=="HEAD"){const S=await a.text();S===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=S:d=JSON.parse(S))}const _=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");_&&b&&b.length>1&&(m=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(h={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,m=null,u=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const _=await a.text();try{h=JSON.parse(_),Array.isArray(h)&&a.status===404&&(d=[],h=null,u=200,p="OK")}catch{a.status===404&&_===""?(u=204,p="No Content"):h={message:_}}if(h&&this.isMaybeSingle&&(!((c=h?.details)===null||c===void 0)&&c.includes("0 rows"))&&(h=null,u=200,p="OK"),h&&this.shouldThrowOnError)throw new Ds.default(h)}return{error:h,data:d,count:m,status:u,statusText:p}});return this.shouldThrowOnError||(i=i.catch(a=>{var o,l,c;return{error:{message:`${(o=a?.name)!==null&&o!==void 0?o:"FetchError"}: ${a?.message}`,details:`${(l=a?.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};Ie.default=qs;var Bs=L&&L.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Te,"__esModule",{value:!0});const Fs=Bs(Ie);let Ms=class extends Fs.default{select(e){let t=!1;const s=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:i=s}={}){const a=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:i=!1,wal:a=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,t?"verbose":null,s?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),h=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${h}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Te.default=Ms;var zs=L&&L.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ge,"__esModule",{value:!0});const Ws=zs(Te);let Hs=class extends Ws.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${a}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const i=s?`${s}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};ge.default=Hs;var Gs=L&&L.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ee,"__esModule",{value:!0});const ae=Gs(ge);let Js=class{constructor(e,{headers:t={},schema:s,fetch:i}){this.url=e,this.headers=t,this.schema=s,this.fetch=i}select(e,{head:t=!1,count:s}={}){const i=t?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new ae.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const i="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),t&&a.push(`count=${t}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new ae.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:i,defaultToNull:a=!0}={}){const o="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((h,d)=>h.concat(Object.keys(d)),[]);if(c.length>0){const h=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",h.join(","))}}return new ae.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new ae.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new ae.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ee.default=Js;var Ce={},$e={};Object.defineProperty($e,"__esModule",{value:!0});$e.version=void 0;$e.version="0.0.0-automated";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.DEFAULT_HEADERS=void 0;const Ks=$e;Ce.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Ks.version}`};var At=L&&L.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(et,"__esModule",{value:!0});const Vs=At(Ee),Ys=At(ge),Qs=Ce;let Xs=class Ot{constructor(e,{headers:t={},schema:s,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},Qs.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new Vs.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ot(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:i=!1,count:a}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;s||i?(o=s?"HEAD":"GET",Object.entries(t).filter(([d,m])=>m!==void 0).map(([d,m])=>[d,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([d,m])=>{l.searchParams.append(d,m)})):(o="POST",c=t);const h=Object.assign({},this.headers);return a&&(h.Prefer=`count=${a}`),new Ys.default({method:o,url:l,headers:h,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};et.default=Xs;var ne=L&&L.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(R,"__esModule",{value:!0});R.PostgrestError=R.PostgrestBuilder=R.PostgrestTransformBuilder=R.PostgrestFilterBuilder=R.PostgrestQueryBuilder=R.PostgrestClient=void 0;const Rt=ne(et);R.PostgrestClient=Rt.default;const Lt=ne(Ee);R.PostgrestQueryBuilder=Lt.default;const Ut=ne(ge);R.PostgrestFilterBuilder=Ut.default;const Dt=ne(Te);R.PostgrestTransformBuilder=Dt.default;const qt=ne(Ie);R.PostgrestBuilder=qt.default;const Bt=ne(Pe);R.PostgrestError=Bt.default;var Zs=R.default={PostgrestClient:Rt.default,PostgrestQueryBuilder:Lt.default,PostgrestFilterBuilder:Ut.default,PostgrestTransformBuilder:Dt.default,PostgrestBuilder:qt.default,PostgrestError:Bt.default};const{PostgrestClient:er,PostgrestQueryBuilder:Zn,PostgrestFilterBuilder:ei,PostgrestTransformBuilder:ti,PostgrestBuilder:si,PostgrestError:ri}=Zs;function tr(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const sr=tr(),rr="2.11.15",nr=`realtime-js/${rr}`,ir="1.0.0",Ft=1e4,ar=1e3;var ce;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(ce||(ce={}));var $;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})($||($={}));var D;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(D||(D={}));var ze;(function(n){n.websocket="websocket"})(ze||(ze={}));var K;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(K||(K={}));class or{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const i=t.getUint8(1),a=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(e.slice(o,o+i));o=o+i;const c=s.decode(e.slice(o,o+a));o=o+a;const h=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:h}}}class Mt{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var k;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(k||(k={}));const lt=(n,e,t={})=>{var s;const i=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((a,o)=>(a[o]=lr(o,n,e,i),a),{})},lr=(n,e,t,s)=>{const i=e.find(l=>l.name===n),a=i?.type,o=t[n];return a&&!s.includes(a)?zt(a,o):We(o)},zt=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return ur(e,t)}switch(n){case k.bool:return cr(e);case k.float4:case k.float8:case k.int2:case k.int4:case k.int8:case k.numeric:case k.oid:return dr(e);case k.json:case k.jsonb:return hr(e);case k.timestamp:return mr(e);case k.abstime:case k.date:case k.daterange:case k.int4range:case k.int8range:case k.money:case k.reltime:case k.text:case k.time:case k.timestamptz:case k.timetz:case k.tsrange:case k.tstzrange:return We(e);default:return We(e)}},We=n=>n,cr=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},dr=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},hr=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},ur=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let a;const o=n.slice(1,t);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>zt(e,l))}return n},mr=n=>typeof n=="string"?n.replace(" ","T"):n,Wt=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Re{constructor(e,t,s={},i=Ft){this.channel=e,this.event=t,this.payload=s,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ct;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(ct||(ct={}));class de{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=de.syncState(this.state,i,a,o),this.pendingDiffs.forEach(c=>{this.state=de.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=de.syncDiff(this.state,i,a,o),l())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,i){const a=this.cloneDeep(e),o=this.transformState(t),l={},c={};return this.map(a,(h,d)=>{o[h]||(c[h]=d)}),this.map(o,(h,d)=>{const m=a[h];if(m){const u=d.map(b=>b.presence_ref),p=m.map(b=>b.presence_ref),x=d.filter(b=>p.indexOf(b.presence_ref)<0),_=m.filter(b=>u.indexOf(b.presence_ref)<0);x.length>0&&(l[h]=x),_.length>0&&(c[h]=_)}else l[h]=d}),this.syncDiff(a,{joins:l,leaves:c},s,i)}static syncDiff(e,t,s,i){const{joins:a,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),i||(i=()=>{}),this.map(a,(l,c)=>{var h;const d=(h=e[l])!==null&&h!==void 0?h:[];if(e[l]=this.cloneDeep(c),d.length>0){const m=e[l].map(p=>p.presence_ref),u=d.filter(p=>m.indexOf(p.presence_ref)<0);e[l].unshift(...u)}s(l,d,c)}),this.map(o,(l,c)=>{let h=e[l];if(!h)return;const d=c.map(m=>m.presence_ref);h=h.filter(m=>d.indexOf(m.presence_ref)<0),e[l]=h,i(l,h,c),h.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const i=e[s];return"metas"in i?t[s]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[s]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var dt;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(dt||(dt={}));var ht;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(ht||(ht={}));var B;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(B||(B={}));class tt{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=$.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Re(this,D.join,this.params,this.timeout),this.rejoinTimer=new Mt(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=$.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=$.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=$.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=$.errored,this.rejoinTimer.scheduleTimeout())}),this._on(D.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new de(this),this.broadcastEndpointURL=Wt(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==$.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params;this._onError(d=>e?.(B.CHANNEL_ERROR,d)),this._onClose(()=>e?.(B.CLOSED));const c={},h={broadcast:a,presence:o,postgres_changes:(i=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(d=>d.filter))!==null&&i!==void 0?i:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:d})=>{var m;if(this.socket.setAuth(),d===void 0){e?.(B.SUBSCRIBED);return}else{const u=this.bindings.postgres_changes,p=(m=u?.length)!==null&&m!==void 0?m:0,x=[];for(let _=0;_<p;_++){const b=u[_],{filter:{event:S,schema:I,table:g,filter:j}}=b,P=d&&d[_];if(P&&P.event===S&&P.schema===I&&P.table===g&&P.filter===j)x.push(Object.assign(Object.assign({},b),{id:P.id}));else{this.unsubscribe(),this.state=$.errored,e?.(B.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(B.SUBSCRIBED);return}}).receive("error",d=>{this.state=$.errored,e?.(B.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e?.(B.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const h=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),h.receive("ok",()=>a("ok")),h.receive("error",()=>a("error")),h.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=$.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(D.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(i=>{s=new Re(this,D.leave,{},e),s.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const i=new AbortController,a=setTimeout(()=>i.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(a),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Re(this,e,t,s);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var i,a;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:h,join:d}=D;if(s&&[l,c,h,d].indexOf(o)>=0&&s!==this._joinRef())return;let u=this._onMessage(o,t,s);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var x,_,b;return((x=p.filter)===null||x===void 0?void 0:x.event)==="*"||((b=(_=p.filter)===null||_===void 0?void 0:_.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(u,s)):(a=this.bindings[o])===null||a===void 0||a.filter(p=>{var x,_,b,S,I,g;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const j=p.id,P=(x=p.filter)===null||x===void 0?void 0:x.event;return j&&((_=t.ids)===null||_===void 0?void 0:_.includes(j))&&(P==="*"||P?.toLocaleLowerCase()===((b=t.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const j=(I=(S=p?.filter)===null||S===void 0?void 0:S.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return j==="*"||j===((g=t?.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof u=="object"&&"ids"in u){const x=u.data,{schema:_,table:b,commit_timestamp:S,type:I,errors:g}=x;u=Object.assign(Object.assign({},{schema:_,table:b,commit_timestamp:S,eventType:I,new:{},old:{},errors:g}),this._getPayloadRecords(x))}p.callback(u,s)})}_isClosed(){return this.state===$.closed}_isJoined(){return this.state===$.joined}_isJoining(){return this.state===$.joining}_isLeaving(){return this.state===$.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const i=e.toLocaleLowerCase(),a={type:i,filter:t,callback:s};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&tt.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(D.close,{},e)}_onError(e){this._on(D.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=$.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=lt(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=lt(e.columns,e.old_record)),t}}const ut=()=>{},fr=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class pr{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ft,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ut,this.ref=0,this.logger=ut,this.conn=null,this.sendBuffer=[],this.serializer=new or,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>fe(async()=>{const{default:c}=await Promise.resolve().then(()=>re);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${ze.websocket}`,this.httpEndpoint=Wt(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(s=t?.params)===null||s===void 0?void 0:s.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=t?.encode?t.encode:(a,o)=>o(JSON.stringify(a)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Mt(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=sr),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ir}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ce.connecting:return K.Connecting;case ce.open:return K.Open;case ce.closing:return K.Closing;default:return K.Closed}}isConnected(){return this.connectionState()===K.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===s);if(i)return i;{const a=new tt(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:s,payload:i,ref:a}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${s} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const i={access_token:t,version:nr};t&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(D.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(ar,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:i,payload:a,ref:o}=t;s==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${s} ${i} ${o&&"("+o+")"||""}`,a),Array.from(this.channels).filter(l=>l._isMember(s)).forEach(l=>l._trigger(i,a,o)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(D.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${s}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([fr],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class st extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function C(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class gr extends st{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class He extends st{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var xr=function(n,e,t,s){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function l(d){try{h(s.next(d))}catch(m){o(m)}}function c(d){try{h(s.throw(d))}catch(m){o(m)}}function h(d){d.done?a(d.value):i(d.value).then(l,c)}h((s=s.apply(n,e||[])).next())})};const Ht=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>fe(async()=>{const{default:s}=await Promise.resolve().then(()=>re);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},br=()=>xr(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fe(()=>Promise.resolve().then(()=>re),void 0)).Response:Response}),Ge=n=>{if(Array.isArray(n))return n.map(t=>Ge(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const i=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=Ge(s)}),e};var V=function(n,e,t,s){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function l(d){try{h(s.next(d))}catch(m){o(m)}}function c(d){try{h(s.throw(d))}catch(m){o(m)}}function h(d){d.done?a(d.value):i(d.value).then(l,c)}h((s=s.apply(n,e||[])).next())})};const Le=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),vr=(n,e,t)=>V(void 0,void 0,void 0,function*(){const s=yield br();n instanceof s&&!t?.noResolveJson?n.json().then(i=>{e(new gr(Le(i),n.status||500))}).catch(i=>{e(new He(Le(i),i))}):e(new He(Le(n),n))}),yr=(n,e,t,s)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s&&(i.body=JSON.stringify(s)),Object.assign(Object.assign({},i),t))};function xe(n,e,t,s,i,a){return V(this,void 0,void 0,function*(){return new Promise((o,l)=>{n(t,yr(e,s,i,a)).then(c=>{if(!c.ok)throw c;return s?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>vr(c,l,s))})})}function Ne(n,e,t,s){return V(this,void 0,void 0,function*(){return xe(n,"GET",e,t,s)})}function z(n,e,t,s,i){return V(this,void 0,void 0,function*(){return xe(n,"POST",e,s,i,t)})}function wr(n,e,t,s,i){return V(this,void 0,void 0,function*(){return xe(n,"PUT",e,s,i,t)})}function _r(n,e,t,s){return V(this,void 0,void 0,function*(){return xe(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Gt(n,e,t,s,i){return V(this,void 0,void 0,function*(){return xe(n,"DELETE",e,s,i,t)})}var A=function(n,e,t,s){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function l(d){try{h(s.next(d))}catch(m){o(m)}}function c(d){try{h(s.throw(d))}catch(m){o(m)}}function h(d){d.done?a(d.value):i(d.value).then(l,c)}h((s=s.apply(n,e||[])).next())})};const jr={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},mt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Nr{constructor(e,t={},s,i){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Ht(i)}uploadOrUpdate(e,t,s,i){return A(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},mt),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i?.headers&&(l=Object.assign(Object.assign({},l),i.headers));const h=this._removeEmptyFolders(t),d=this._getFinalPath(h),m=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:a,headers:l},o?.duplex?{duplex:o.duplex}:{})),u=yield m.json();return m.ok?{data:{path:h,id:u.Id,fullPath:u.Key},error:null}:{data:null,error:u}}catch(a){if(C(a))return{data:null,error:a};throw a}})}upload(e,t,s){return A(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,i){return A(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const h=Object.assign({upsert:mt.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",h.cacheControl)):(c=s,d["cache-control"]=`max-age=${h.cacheControl}`,d["content-type"]=h.contentType);const m=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),u=yield m.json();return m.ok?{data:{path:a,fullPath:u.Key},error:null}:{data:null,error:u}}catch(c){if(C(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return A(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const a=yield z(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:i}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new st("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(s){if(C(s))return{data:null,error:s};throw s}})}update(e,t,s){return A(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return A(this,void 0,void 0,function*(){try{return{data:yield z(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(C(i))return{data:null,error:i};throw i}})}copy(e,t,s){return A(this,void 0,void 0,function*(){try{return{data:{path:(yield z(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(C(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,s){return A(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield z(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s?.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(C(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,s){return A(this,void 0,void 0,function*(){try{const i=yield z(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(C(i))return{data:null,error:i};throw i}})}download(e,t){return A(this,void 0,void 0,function*(){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(t?.transform||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Ne(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(C(l))return{data:null,error:l};throw l}})}info(e){return A(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Ne(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Ge(s),error:null}}catch(s){if(C(s))return{data:null,error:s};throw s}})}exists(e){return A(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield _r(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(C(s)&&s instanceof He){const i=s.originalError;if([400,404].includes(i?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),i=[],a=t?.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&i.push(a);const l=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&i.push(c);let h=i.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${h}`)}}}remove(e){return A(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}})}list(e,t,s){return A(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},jr),t),{prefix:e||""});return{data:yield z(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},s),error:null}}catch(i){if(C(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const kr="2.7.1",Sr={"X-Client-Info":`storage-js/${kr}`};var Y=function(n,e,t,s){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function l(d){try{h(s.next(d))}catch(m){o(m)}}function c(d){try{h(s.throw(d))}catch(m){o(m)}}function h(d){d.done?a(d.value):i(d.value).then(l,c)}h((s=s.apply(n,e||[])).next())})};class Er{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Sr),t),this.fetch=Ht(s)}listBuckets(){return Y(this,void 0,void 0,function*(){try{return{data:yield Ne(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(C(e))return{data:null,error:e};throw e}})}getBucket(e){return Y(this,void 0,void 0,function*(){try{return{data:yield Ne(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Y(this,void 0,void 0,function*(){try{return{data:yield z(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(C(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Y(this,void 0,void 0,function*(){try{return{data:yield wr(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(C(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Y(this,void 0,void 0,function*(){try{return{data:yield z(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Y(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(C(t))return{data:null,error:t};throw t}})}}class Tr extends Er{constructor(e,t={},s){super(e,t,s)}from(e){return new Nr(this.url,this.headers,e,this.fetch)}}const Ir="2.50.3";let le="";typeof Deno<"u"?le="deno":typeof document<"u"?le="web":typeof navigator<"u"&&navigator.product==="ReactNative"?le="react-native":le="node";const Pr={"X-Client-Info":`supabase-js-${le}/${Ir}`},Cr={headers:Pr},$r={schema:"public"},Ar={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Or={};var Rr=function(n,e,t,s){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function l(d){try{h(s.next(d))}catch(m){o(m)}}function c(d){try{h(s.throw(d))}catch(m){o(m)}}function h(d){d.done?a(d.value):i(d.value).then(l,c)}h((s=s.apply(n,e||[])).next())})};const Lr=n=>{let e;return n?e=n:typeof fetch>"u"?e=Pt:e=fetch,(...t)=>e(...t)},Ur=()=>typeof Headers>"u"?Ct:Headers,Dr=(n,e,t)=>{const s=Lr(t),i=Ur();return(a,o)=>Rr(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:n;let h=new i(o?.headers);return h.has("apikey")||h.set("apikey",n),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),s(a,Object.assign(Object.assign({},o),{headers:h}))})};var qr=function(n,e,t,s){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function l(d){try{h(s.next(d))}catch(m){o(m)}}function c(d){try{h(s.throw(d))}catch(m){o(m)}}function h(d){d.done?a(d.value):i(d.value).then(l,c)}h((s=s.apply(n,e||[])).next())})};function Br(n){return n.endsWith("/")?n:n+"/"}function Fr(n,e){var t,s;const{db:i,auth:a,realtime:o,global:l}=n,{db:c,auth:h,realtime:d,global:m}=e,u={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},h),a),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},m),l),{headers:Object.assign(Object.assign({},(t=m?.headers)!==null&&t!==void 0?t:{}),(s=l?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>qr(this,void 0,void 0,function*(){return""})};return n.accessToken?u.accessToken=n.accessToken:delete u.accessToken,u}const Jt="2.70.0",ee=30*1e3,Je=3,Ue=Je*ee,Mr="http://localhost:9999",zr="supabase.auth.token",Wr={"X-Client-Info":`gotrue-js/${Jt}`},Ke="X-Supabase-Api-Version",Kt={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Hr=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Gr=6e5;class rt extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function y(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class Jr extends rt{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function Kr(n){return y(n)&&n.name==="AuthApiError"}class Vt extends rt{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class H extends rt{constructor(e,t,s,i){super(e,s,i),this.name=t,this.status=s}}class M extends H{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Vr(n){return y(n)&&n.name==="AuthSessionMissingError"}class be extends H{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ve extends H{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ye extends H{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Yr(n){return y(n)&&n.name==="AuthImplicitGrantRedirectError"}class ft extends H{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ve extends H{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function De(n){return y(n)&&n.name==="AuthRetryableFetchError"}class pt extends H{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class he extends H{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),gt=` 	
\r=`.split(""),Qr=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<gt.length;e+=1)n[gt[e].charCodeAt(0)]=-2;for(let e=0;e<ke.length;e+=1)n[ke[e].charCodeAt(0)]=e;return n})();function xt(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(ke[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(ke[s]),e.queuedBits-=6}}function Yt(n,e,t){const s=Qr[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function bt(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{en(o,s,t)};for(let o=0;o<n.length;o+=1)Yt(n.charCodeAt(o),i,a);return e.join("")}function Xr(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Zr(n,e){for(let t=0;t<n.length;t+=1){let s=n.charCodeAt(t);if(s>55295&&s<=56319){const i=(s-55296)*1024&65535;s=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}Xr(s,e)}}function en(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let s=1;s<6;s+=1)if(!(n>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function tn(n){const e=[],t={queue:0,queuedBits:0},s=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)Yt(n.charCodeAt(i),t,s);return new Uint8Array(e)}function sn(n){const e=[];return Zr(n,t=>e.push(t)),new Uint8Array(e)}function rn(n){const e=[],t={queue:0,queuedBits:0},s=i=>{e.push(i)};return n.forEach(i=>xt(i,t,s)),xt(null,t,s),e.join("")}function nn(n){return Math.round(Date.now()/1e3)+n}function an(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const U=()=>typeof window<"u"&&typeof document<"u",G={tested:!1,writable:!1},ue=()=>{if(!U())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(G.tested)return G.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),G.tested=!0,G.writable=!0}catch{G.tested=!0,G.writable=!1}return G.writable};function on(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return t.searchParams.forEach((s,i)=>{e[i]=s}),e}const Qt=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>fe(async()=>{const{default:s}=await Promise.resolve().then(()=>re);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},ln=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Xt=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},we=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},_e=async(n,e)=>{await n.removeItem(e)};class Ae{constructor(){this.promise=new Ae.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ae.promiseConstructor=Promise;function qe(n){const e=n.split(".");if(e.length!==3)throw new he("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Hr.test(e[s]))throw new he("JWT not in base64url format");return{header:JSON.parse(bt(e[0])),payload:JSON.parse(bt(e[1])),signature:tn(e[2]),raw:{header:e[0],payload:e[1]}}}async function cn(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function dn(n,e){return new Promise((s,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await n(a);if(!e(a,null,o)){s(o);return}}catch(o){if(!e(a,o)){i(o);return}}})()})}function hn(n){return("0"+n.toString(16)).substr(-2)}function un(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let i="";for(let a=0;a<56;a++)i+=t.charAt(Math.floor(Math.random()*s));return i}return crypto.getRandomValues(e),Array.from(e,hn).join("")}async function mn(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(s);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function fn(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await mn(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Q(n,e,t=!1){const s=un();let i=s;t&&(i+="/PASSWORD_RECOVERY"),await Xt(n,`${e}-code-verifier`,i);const a=await fn(s);return[a,s===a?"plain":"s256"]}const pn=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gn(n){const e=n.headers.get(Ke);if(!e||!e.match(pn))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function xn(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function bn(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vn=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function X(n){if(!vn.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var yn=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t};const J=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),wn=[502,503,504];async function vt(n){var e;if(!ln(n))throw new Ve(J(n),0);if(wn.includes(n.status))throw new Ve(J(n),n.status);let t;try{t=await n.json()}catch(a){throw new Vt(J(a),a)}let s;const i=gn(n);if(i&&i.getTime()>=Kt["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new pt(J(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new M}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new pt(J(t),n.status,t.weak_password.reasons);throw new Jr(J(t),n.status||500,s)}const _n=(n,e,t,s)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(s),Object.assign(Object.assign({},i),t))};async function w(n,e,t,s){var i;const a=Object.assign({},s?.headers);a[Ke]||(a[Ke]=Kt["2024-01-01"].name),s?.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const o=(i=s?.query)!==null&&i!==void 0?i:{};s?.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await jn(n,e,t+l,{headers:a,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(c):{data:Object.assign({},c),error:null}}async function jn(n,e,t,s,i,a){const o=_n(e,s,i,a);let l;try{l=await n(t,Object.assign({},o))}catch(c){throw console.error(c),new Ve(J(c),0)}if(l.ok||await vt(l),s?.noResolveJson)return l;try{return await l.json()}catch(c){await vt(c)}}function q(n){var e;let t=null;En(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=nn(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function yt(n){const e=q(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function W(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Nn(n){return{data:n,error:null}}function kn(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:i,verification_type:a}=n,o=yn(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:s,redirect_to:i,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Sn(n){return n}function En(n){return n.access_token&&n.refresh_token&&n.expires_in}const Be=["global","local","others"];var Tn=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t};class In{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Qt(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Be[0]){if(Be.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Be.join(", ")}`);try{return await w(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(y(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await w(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:W})}catch(s){if(y(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Tn(e,["options"]),i=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(i.new_email=s?.newEmail,delete i.newEmail),await w(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:kn,redirectTo:t?.redirectTo})}catch(t){if(y(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await w(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:W})}catch(t){if(y(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,i,a,o,l,c;try{const h={nextPage:null,lastPage:0,total:0},d=await w(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Sn});if(d.error)throw d.error;const m=await d.json(),u=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(x=>{const _=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(x.split(";")[1].split("=")[1]);h[`${b}Page`]=_}),h.total=parseInt(u)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(y(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){X(e);try{return await w(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:W})}catch(t){if(y(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){X(e);try{return await w(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:W})}catch(s){if(y(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){X(e);try{return await w(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:W})}catch(s){if(y(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){X(e.userId);try{const{data:t,error:s}=await w(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:s}}catch(t){if(y(t))return{data:null,error:t};throw t}}async _deleteFactor(e){X(e.userId),X(e.id);try{return{data:await w(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(y(t))return{data:null,error:t};throw t}}}const Pn={getItem:n=>ue()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{ue()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{ue()&&globalThis.localStorage.removeItem(n)}};function wt(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function Cn(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Z={debug:!!(globalThis&&ue()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Zt extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class $n extends Zt{}async function An(n,e,t){Z.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Z.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async i=>{if(i){Z.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{Z.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw Z.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new $n(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Z.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Cn();const On={url:Mr,storageKey:zr,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Wr,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function _t(n,e,t){return await t()}class me{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=me.nextInstanceID,me.nextInstanceID+=1,this.instanceID>0&&U()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},On),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new In({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Qt(i.fetch),this.lock=i.lock||_t,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:U()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=An:this.lock=_t,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:ue()?this.storage=Pn:(this.memoryStorage={},this.storage=wt(this.memoryStorage)):(this.memoryStorage={},this.storage=wt(this.memoryStorage)),U()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Jt}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=on(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),U()&&this.detectSessionInUrl&&s!=="none"){const{data:i,error:a}=await this._getSessionFromURL(t,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Yr(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return y(t)?{error:t}:{error:new Vt("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,i;try{const a=await w(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:q}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(a){if(y(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,s,i;try{let a;if("email"in e){const{email:d,password:m,options:u}=e;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await Q(this.storage,this.storageKey)),a=await w(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:u?.emailRedirectTo,body:{email:d,password:m,data:(t=u?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:p,code_challenge_method:x},xform:q})}else if("phone"in e){const{phone:d,password:m,options:u}=e;a=await w(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:m,data:(s=u?.data)!==null&&s!==void 0?s:{},channel:(i=u?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:q})}else throw new ve("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(a){if(y(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:o,options:l}=e;t=await w(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:yt})}else if("phone"in e){const{phone:a,password:o,options:l}=e;t=await w(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:yt})}else throw new ve("You must provide either an email or phone number and a password");const{data:s,error:i}=t;return i?{data:{user:null,session:null},error:i}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new be}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:i})}catch(t){if(y(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,i,a,o,l,c,h,d,m,u,p;let x,_;if("message"in e)x=e.message,_=e.signature;else{const{chain:b,wallet:S,statement:I,options:g}=e;let j;if(U())if(typeof S=="object")j=S;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))j=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!g?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=S}const P=new URL((t=g?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in j&&j.signIn){const E=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g?.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),I?{statement:I}:null));let N;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")N=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)N=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)x=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),_=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${P.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(i=(s=g?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=g?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((o=g?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((c=g?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((h=g?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((m=(d=g?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||m===void 0)&&m.length?["Resources",...g.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const E=await j.signMessage(new TextEncoder().encode(x),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=E}}try{const{data:b,error:S}=await w(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:rn(_)},!((u=e.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:q});if(S)throw S;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new be}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:S})}catch(b){if(y(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const t=await we(this.storage,`${this.storageKey}-code-verifier`),[s,i]=(t??"").split("/");try{const{data:a,error:o}=await w(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:q});if(await _e(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new be}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(y(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:s,token:i,access_token:a,nonce:o}=e,l=await w(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:q}),{data:c,error:h}=l;return h?{data:{user:null,session:null},error:h}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new be}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:h})}catch(t){if(y(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,i,a,o;try{if("email"in e){const{email:l,options:c}=e;let h=null,d=null;this.flowType==="pkce"&&([h,d]=await Q(this.storage,this.storageKey));const{error:m}=await w(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(s=c?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:h,code_challenge_method:d},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:l,options:c}=e,{data:h,error:d}=await w(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c?.data)!==null&&i!==void 0?i:{},create_user:(a=c?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(o=c?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:h?.message_id},error:d}}throw new ve("You must provide either an email or phone number.")}catch(l){if(y(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,s;try{let i,a;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await w(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:q});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,h=o.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(i){if(y(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,s,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Q(this.storage,this.storageKey)),await w(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:Nn})}catch(a){if(y(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new M;const{error:i}=await w(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(y(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:i,options:a}=e,{error:o}=await w(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:i,options:a}=e,{data:o,error:l}=await w(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:l}}throw new ve("You must provide either an email or phone number and a type")}catch(t){if(y(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await we(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Ue:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,h,d)=>(!o&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,h,d))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await w(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:W}):await this._useSession(async t=>{var s,i,a;const{data:o,error:l}=t;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new M}:await w(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:W})})}catch(t){if(y(t))return Vr(t)&&(await this._removeSession(),await _e(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:i,error:a}=s;if(a)throw a;if(!i.session)throw new M;const o=i.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Q(this.storage,this.storageKey));const{data:h,error:d}=await w(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:W});if(d)throw d;return o.user=h.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(y(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new M;const t=Date.now()/1e3;let s=t,i=!0,a=null;const{payload:o}=qe(e.access_token);if(o.exp&&(s=o.exp,i=s<=t),i){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(y(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new M;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(y(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!U())throw new ye("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ye(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new ft("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ye("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ft("No code detected.");const{data:I,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:h}=e;if(!a||!l||!o||!h)throw new ye("No session defined in URL");const d=Math.round(Date.now()/1e3),m=parseInt(l);let u=d+m;c&&(u=parseInt(c));const p=u-d;p*1e3<=ee&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${m}s`);const x=u-m;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,u,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,u,d);const{data:_,error:b}=await this._getUser(a);if(b)throw b;const S={provider_token:s,provider_refresh_token:i,access_token:a,expires_in:m,expires_at:u,refresh_token:o,token_type:h,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:e.type},error:null}}catch(s){if(y(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await we(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:i,error:a}=t;if(a)return{error:a};const o=(s=i.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Kr(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await _e(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=an(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,i;try{const{data:{session:a},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let s=null,i=null;this.flowType==="pkce"&&([s,i]=await Q(this.storage,this.storageKey,!0));try{return await w(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(y(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(y(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:i}=await this._useSession(async a=>{var o,l,c,h,d;const{data:m,error:u}=a;if(u)throw u;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await w(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(h=m.session)===null||h===void 0?void 0:h.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return U()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(y(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,i;const{data:a,error:o}=t;if(o)throw o;return await w(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(y(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await dn(async i=>(i>0&&await cn(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await w(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:q})),(i,a)=>{const o=200*Math.pow(2,i);return a&&De(a)&&Date.now()+o-s<ee})}catch(s){if(this._debug(t,"error",s),y(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),U()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await we(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Ue;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${Ue}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),De(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new M;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Ae;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new M;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(i,"error",a),y(a)){const o={session:null,error:a};return De(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,s=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Xt(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await _e(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&U()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ee);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((s.expires_at*1e3-e)/ee);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ee}ms, refresh threshold is ${Je} ticks`),i<=Je&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Zt)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!U()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const i=[`provider=${encodeURIComponent(t)}`];if(s?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&i.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,o]=await Q(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(s?.queryParams){const a=new URLSearchParams(s.queryParams);i.push(a.toString())}return s?.skipBrowserRedirect&&i.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:i,error:a}=t;return a?{data:null,error:a}:await w(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(y(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,i;const{data:a,error:o}=t;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:h}=await w(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((i=c?.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(y(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:i,error:a}=t;if(a)return{data:null,error:a};const{data:o,error:l}=await w(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(t){if(y(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:i,error:a}=t;return a?{data:null,error:a}:await w(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(y(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=e?.factors||[],i=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=qe(i.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((s=(t=i.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(o=>o.kid===e);if(s||(s=this.jwks.keys.find(o=>o.kid===e),s&&this.jwks_cached_at+Gr>Date.now()))return s;const{data:i,error:a}=await w(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!i.keys||i.keys.length===0)throw new he("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),s=i.keys.find(o=>o.kid===e),!s)throw new he("No matching signing key found in JWKS");return s}async getClaims(e,t={keys:[]}){try{let s=e;if(!s){const{data:p,error:x}=await this.getSession();if(x||!p.session)return{data:null,error:x};s=p.session.access_token}const{header:i,payload:a,signature:o,raw:{header:l,payload:c}}=qe(s);if(xn(a.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:a,header:i,signature:o},error:null}}const h=bn(i.alg),d=await this.fetchJwk(i.kid,t),m=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,m,o,sn(`${l}.${c}`)))throw new he("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(s){if(y(s))return{data:null,error:s};throw s}}}me.nextInstanceID=0;const Rn=me;class Ln extends Rn{constructor(e){super(e)}}var Un=function(n,e,t,s){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function l(d){try{h(s.next(d))}catch(m){o(m)}}function c(d){try{h(s.throw(d))}catch(m){o(m)}}function h(d){d.done?a(d.value):i(d.value).then(l,c)}h((s=s.apply(n,e||[])).next())})};class Dn{constructor(e,t,s){var i,a,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=Br(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const h=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:$r,realtime:Or,auth:Object.assign(Object.assign({},Ar),{storageKey:h}),global:Cr},m=Fr(s??{},d);this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=m.global.headers)!==null&&a!==void 0?a:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(u,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=m.auth)!==null&&o!==void 0?o:{},this.headers,m.global.fetch),this.fetch=Dr(t,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new er(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),m.accessToken||this._listenForAuthEvents()}get functions(){return new Ps(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Tr(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Un(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:i,storageKey:a,flowType:o,lock:l,debug:c},h,d){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ln({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),h),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:i,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new pr(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s?.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const qn=(n,e,t)=>new Dn(n,e,t),es="https://xbegqusbvtqypnbwrzsn.supabase.co",ts="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhiZWdxdXNidnRxeXBuYndyenNuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE3MzcxMTEsImV4cCI6MjA2NzMxMzExMX0.nVAcgra8thHLGrmGTImrtW31e5FlmjIqHpRGzmFBm1U";console.log("Supabase Environment Check:",{hasUrl:!0,hasKey:!0,url:es.substring(0,30)+"...",key:ts.substring(0,20)+"..."});const oe=qn(es,ts),Bn={async createInspectionRequest(n){console.log("Attempting to create inspection request:",n);const{data:e,error:t}=await oe.from("inspection_requests").insert([n]).select().single();if(console.log("Supabase response:",{result:e,error:t}),t)throw console.error("Error creating inspection request:",t),t;return this.sendNotificationEmail("inspection_request",e).catch(s=>{console.error("Error sending notification email:",s)}),e},async createInterestForm(n){console.log("Attempting to create interest form:",n);const{data:e,error:t}=await oe.from("interest_forms").insert([n]).select().single();if(console.log("Supabase response:",{result:e,error:t}),t)throw console.error("Error creating interest form:",t),t;return this.sendNotificationEmail("interest_form",e).catch(s=>{console.error("Error sending notification email:",s)}),e},async sendNotificationEmail(n,e){console.log("🚀 Calling edge function with:",{type:n,data:e});const{data:t,error:s}=await oe.functions.invoke("send-notification-email",{body:{type:n,data:e}});if(console.log("📧 Edge function response:",{result:t,error:s}),s)throw console.error("Error calling email function:",s),s;return t},async getInspectionRequests(){const{data:n,error:e}=await oe.from("inspection_requests").select("*").order("created_at",{ascending:!1});if(e)throw console.error("Error fetching inspection requests:",e),e;return n},async getInterestForms(){const{data:n,error:e}=await oe.from("interest_forms").select("*").order("created_at",{ascending:!1});if(e)throw console.error("Error fetching interest forms:",e),e;return n}},Fn=()=>{const n=ws(),[e,t]=T.useState({firstName:"",lastName:"",email:"",company:"",phone:"",message:""}),[s,i]=T.useState(!1),[a,o]=T.useState({}),l=()=>{const d={};return e.firstName.trim()||(d.firstName="First name is required"),e.lastName.trim()||(d.lastName="Last name is required"),e.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(d.email="Please enter a valid email address"):d.email="Email is required",e.company.trim()||(d.company="Company name is required"),e.phone.trim()||(d.phone="Phone number is required"),o(d),Object.keys(d).length===0},c=d=>{const{name:m,value:u}=d.target;t(p=>({...p,[m]:u})),a[m]&&o(p=>({...p,[m]:void 0}))},h=async d=>{if(d.preventDefault(),!!l()){console.log("Form submission started with data:",e),i(!0);try{const m={first_name:e.firstName,last_name:e.lastName,email:e.email,company:e.company,phone:e.phone,message:e.message||void 0};console.log("Submitting to database:",m);const u=await Bn.createInterestForm(m);console.log("Interest form saved:",u),n("/thank-you")}catch(m){console.error("Error submitting interest form:",m),m instanceof Error?(console.error("Full error details:",{message:m.message,stack:m.stack,name:m.name}),alert(`There was an error submitting your form: ${m.message}. Please try again.`)):alert("An unknown error occurred. Please try again.")}finally{i(!1)}}};return r.jsxs("section",{id:"contact",className:"py-24 bg-gradient-to-br from-neutral-50 via-white to-neutral-100 relative overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 opacity-30",children:[r.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-gradient-to-br from-accent/20 to-primary-700/10 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-gradient-to-br from-primary-700/10 to-accent/20 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute top-1/2 left-1/3 w-48 h-48 bg-gradient-to-br from-accent/15 to-primary-700/15 rounded-full blur-2xl"})]}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[r.jsxs("div",{className:"text-center mb-20 animate-slide-up",children:[r.jsxs("div",{className:"inline-flex items-center gap-3 bg-gradient-to-r from-accent/10 to-primary-700/10 backdrop-blur-sm rounded-full px-6 py-3 mb-8 border border-accent/20",children:[r.jsx(je,{className:"w-5 h-5 text-accent animate-pulse"}),r.jsx("span",{className:"text-sm font-semibold text-primary-700",children:"Transform Your Business Today"}),r.jsx(je,{className:"w-5 h-5 text-accent animate-pulse"})]}),r.jsxs("h2",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-primary-700 mb-6 leading-tight",children:["Ready to ",r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-accent to-primary-700",children:"Transform"})," Your Inspections?"]}),r.jsx("p",{className:"text-xl md:text-2xl text-neutral-600 max-w-4xl mx-auto leading-relaxed",children:"Join forward-thinking insurance companies revolutionizing their inspection processes with Inspectana's intelligent drone platform and AI-powered analysis."})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-end",children:[r.jsxs("div",{className:"animate-slide-up space-y-8",children:[r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"absolute inset-0 rounded-3xl overflow-hidden",children:[r.jsx("img",{src:"https://images.pexels.com/photos/3184360/pexels-photo-3184360.jpeg?auto=compress&cs=tinysrgb&w=800&h=600&fit=crop",alt:"Advanced technology platform",className:"w-full h-full object-cover opacity-20"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/95 to-neutral-50/95"})]}),r.jsxs("div",{className:"relative bg-gradient-to-br from-white/80 to-neutral-50/80 backdrop-blur-sm rounded-3xl p-8 shadow-xl border border-neutral-200/50 overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-accent via-primary-700 to-accent"}),r.jsxs("div",{className:"flex items-start gap-6",children:[r.jsx("div",{className:"bg-gradient-to-br from-accent to-accent-600 p-4 rounded-2xl shadow-lg flex-shrink-0",children:r.jsx(Tt,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-primary-700 mb-4",children:"Next-Generation Insurance Technology"}),r.jsx("p",{className:"text-lg text-neutral-600 leading-relaxed mb-6",children:"Experience the future of insurance inspections with AI-powered analysis, automated workflows, and real-time insights that transform how you process claims and assess risk."}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex",children:[...Array(5)].map((d,m)=>r.jsx(bs,{className:"w-5 h-5 text-accent fill-current"},m))}),r.jsx("span",{className:"text-sm font-medium text-neutral-600",children:"Trusted by leading insurers"})]})]})]})]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"group bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-neutral-200/50 hover:border-accent/30",children:[r.jsx("div",{className:"bg-gradient-to-br from-accent/10 to-accent/5 p-3 rounded-xl mb-4 group-hover:from-accent/20 group-hover:to-accent/10 transition-all duration-300",children:r.jsx(it,{className:"w-6 h-6 text-accent"})}),r.jsx("h4",{className:"font-bold text-primary-700 mb-2 text-lg",children:"Free Platform Demo"}),r.jsx("p",{className:"text-neutral-600 text-sm leading-relaxed",children:"See the complete Inspectana platform in action with real inspection data and comprehensive feature demonstrations."})]}),r.jsxs("div",{className:"group bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-neutral-200/50 hover:border-accent/30",children:[r.jsx("div",{className:"bg-gradient-to-br from-accent/10 to-accent/5 p-3 rounded-xl mb-4 group-hover:from-accent/20 group-hover:to-accent/10 transition-all duration-300",children:r.jsx(Et,{className:"w-6 h-6 text-accent"})}),r.jsx("h4",{className:"font-bold text-primary-700 mb-2 text-lg",children:"Custom Integration"}),r.jsx("p",{className:"text-neutral-600 text-sm leading-relaxed",children:"Seamless integration with your existing insurance management systems and workflow processes."})]}),r.jsxs("div",{className:"group bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-neutral-200/50 hover:border-accent/30",children:[r.jsx("div",{className:"bg-gradient-to-br from-accent/10 to-accent/5 p-3 rounded-xl mb-4 group-hover:from-accent/20 group-hover:to-accent/10 transition-all duration-300",children:r.jsx(Qe,{className:"w-6 h-6 text-accent"})}),r.jsx("h4",{className:"font-bold text-primary-700 mb-2 text-lg",children:"Implementation Support"}),r.jsx("p",{className:"text-neutral-600 text-sm leading-relaxed",children:"Complete implementation support with training, onboarding, and ongoing technical assistance."})]}),r.jsxs("div",{className:"group bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-neutral-200/50 hover:border-accent/30",children:[r.jsx("div",{className:"bg-gradient-to-br from-accent/10 to-accent/5 p-3 rounded-xl mb-4 group-hover:from-accent/20 group-hover:to-accent/10 transition-all duration-300",children:r.jsx(F,{className:"w-6 h-6 text-accent"})}),r.jsx("h4",{className:"font-bold text-primary-700 mb-2 text-lg",children:"ROI Analysis"}),r.jsx("p",{className:"text-neutral-600 text-sm leading-relaxed",children:"Detailed ROI analysis and business case development for your specific operational requirements."})]})]}),r.jsxs("div",{className:"bg-gradient-to-r from-primary-700 to-primary-600 rounded-3xl p-8 text-white relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full blur-2xl"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-accent/30 rounded-full blur-xl"}),r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-3 rounded-xl flex-shrink-0",children:r.jsx(F,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-xl font-bold text-white mb-1",children:"Innovative Technology Company"}),r.jsx("p",{className:"text-primary-100 text-sm",children:"Cape Coral, Florida • Founded 2025"})]})]}),r.jsx("p",{className:"text-primary-100 leading-relaxed mb-8 text-base",children:"We're focused on delivering cutting-edge insurance technology with personalized service and rapid innovation. Building the future of insurance inspections, one platform at a time."}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[r.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:"24h"}),r.jsx("div",{className:"text-xs text-primary-200 font-medium",children:"Response Time"})]}),r.jsxs("div",{className:"text-center bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[r.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:"100%"}),r.jsx("div",{className:"text-xs text-primary-200 font-medium",children:"Custom Solutions"})]}),r.jsxs("div",{className:"text-center bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[r.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:"2025"}),r.jsx("div",{className:"text-xs text-primary-200 font-medium",children:"Next-Gen Tech"})]})]})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[r.jsx("img",{src:"https://images.pexels.com/photos/3184291/pexels-photo-3184291.jpeg?auto=compress&cs=tinysrgb&w=400&h=250&fit=crop",alt:"AI-powered analysis dashboard",className:"rounded-xl shadow-lg w-full h-24 object-cover hover:scale-105 transition-transform duration-300"}),r.jsx("img",{src:"https://images.pexels.com/photos/590016/pexels-photo-590016.jpeg?auto=compress&cs=tinysrgb&w=400&h=250&fit=crop",alt:"Real-time inspection monitoring",className:"rounded-xl shadow-lg w-full h-24 object-cover hover:scale-105 transition-transform duration-300"})]}),r.jsx("div",{className:"animate-fade-in",children:r.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 md:p-10 border border-neutral-200/50 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-accent via-primary-700 to-accent"}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsxs("div",{className:"inline-flex items-center gap-3 bg-gradient-to-r from-accent/10 to-primary-700/10 rounded-full px-4 py-2 mb-4",children:[r.jsx(je,{className:"w-4 h-4 text-accent"}),r.jsx("span",{className:"text-sm font-semibold text-primary-700",children:"Get Started Today"})]}),r.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-primary-700 mb-2",children:"Request Your Inspection Demo"}),r.jsx("p",{className:"text-neutral-600",children:"Transform your inspection workflow in just 30 minutes"})]}),r.jsxs("form",{onSubmit:h,className:"space-y-6",children:[r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"firstName",className:"block text-sm font-semibold text-primary-700 mb-3",children:[r.jsx(Nt,{className:"w-4 h-4 inline mr-2"}),"First Name *"]}),r.jsx("input",{type:"text",id:"firstName",name:"firstName",value:e.firstName,onChange:c,className:`w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-accent/20 focus:border-accent transition-all duration-300 bg-neutral-50/50 hover:bg-white ${a.firstName?"border-red-300":"border-neutral-200"}`,placeholder:"John"}),a.firstName&&r.jsx("p",{className:"text-red-500 text-sm mt-2",children:a.firstName})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"lastName",className:"block text-sm font-semibold text-primary-700 mb-3",children:"Last Name *"}),r.jsx("input",{type:"text",id:"lastName",name:"lastName",value:e.lastName,onChange:c,className:`w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-accent/20 focus:border-accent transition-all duration-300 bg-neutral-50/50 hover:bg-white ${a.lastName?"border-red-300":"border-neutral-200"}`,placeholder:"Smith"}),a.lastName&&r.jsx("p",{className:"text-red-500 text-sm mt-2",children:a.lastName})]})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"email",className:"block text-sm font-semibold text-primary-700 mb-3",children:[r.jsx(te,{className:"w-4 h-4 inline mr-2"}),"Business Email *"]}),r.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:c,className:`w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-accent/20 focus:border-accent transition-all duration-300 bg-neutral-50/50 hover:bg-white ${a.email?"border-red-300":"border-neutral-200"}`,placeholder:"john.smith@insurance.com"}),a.email&&r.jsx("p",{className:"text-red-500 text-sm mt-2",children:a.email})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"company",className:"block text-sm font-semibold text-primary-700 mb-3",children:[r.jsx(vs,{className:"w-4 h-4 inline mr-2"}),"Insurance Company *"]}),r.jsx("input",{type:"text",id:"company",name:"company",value:e.company,onChange:c,className:`w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-accent/20 focus:border-accent transition-all duration-300 bg-neutral-50/50 hover:bg-white ${a.company?"border-red-300":"border-neutral-200"}`,placeholder:"Your Insurance Company"}),a.company&&r.jsx("p",{className:"text-red-500 text-sm mt-2",children:a.company})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"phone",className:"block text-sm font-semibold text-primary-700 mb-3",children:[r.jsx(Fe,{className:"w-4 h-4 inline mr-2"}),"Phone Number *"]}),r.jsx("input",{type:"tel",id:"phone",name:"phone",value:e.phone,onChange:c,className:`w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-accent/20 focus:border-accent transition-all duration-300 bg-neutral-50/50 hover:bg-white ${a.phone?"border-red-300":"border-neutral-200"}`,placeholder:"+1 (555) 123-4567"}),a.phone&&r.jsx("p",{className:"text-red-500 text-sm mt-2",children:a.phone})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"message",className:"block text-sm font-semibold text-primary-700 mb-3",children:[r.jsx(it,{className:"w-4 h-4 inline mr-2"}),"Tell us about your inspection challenges (optional)"]}),r.jsx("textarea",{id:"message",name:"message",value:e.message,onChange:c,rows:4,className:"w-full px-4 py-4 border-2 border-neutral-200 rounded-xl focus:ring-4 focus:ring-accent/20 focus:border-accent transition-all duration-300 resize-none bg-neutral-50/50 hover:bg-white",placeholder:"Current inspection volume, processing challenges, integration requirements, or specific use cases..."})]}),r.jsx("button",{type:"submit",disabled:s,className:`w-full bg-gradient-to-r from-accent to-accent-600 text-white py-5 px-8 rounded-xl font-bold text-lg transition-all duration-300 flex items-center justify-center gap-3 shadow-lg hover:shadow-xl ${s?"opacity-50 cursor-not-allowed":"hover:from-accent-600 hover:to-accent-700 transform hover:scale-105"}`,children:s?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Submitting Request..."]}):r.jsxs(r.Fragment,{children:["Get My Inspection Demo",r.jsx(Se,{className:"w-5 h-5"})]})}),r.jsxs("div",{className:"text-center pt-4",children:[r.jsxs("p",{className:"text-xs text-neutral-500 leading-relaxed",children:["By submitting this form, you agree to receive communications from Inspectana.",r.jsx("br",{}),"We respect your privacy and will never share your information."]}),r.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3",children:[r.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),r.jsx("span",{className:"text-xs font-medium text-green-600",children:"Secure & confidential"})]})]})]})]})})]})]})]})]})},Mn=()=>{const[n,e]=T.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsxs("section",{className:"py-24 bg-gradient-to-br from-primary-700 via-primary-600 to-primary-500 text-white relative overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 opacity-10",children:[r.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-accent rounded-full blur-3xl"}),r.jsx("div",{className:"absolute bottom-20 right-10 w-40 h-40 bg-white rounded-full blur-3xl"}),r.jsx("div",{className:"absolute top-1/2 left-1/3 w-24 h-24 bg-accent rounded-full blur-2xl"})]}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/10 backdrop-blur-sm rounded-full px-4 py-2 mb-6",children:[r.jsx(je,{className:"w-4 h-4 text-accent"}),r.jsx("span",{className:"text-sm font-medium",children:"Transform Your Business Today"})]}),r.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6 max-w-4xl mx-auto leading-tight",children:"Ready to Revolutionize Your Insurance Inspections?"}),r.jsx("p",{className:"text-xl text-primary-100 mb-12 max-w-3xl mx-auto leading-relaxed",children:"Join the growing number of insurance companies that have transformed their inspection processes with Inspectana's intelligent drone platform and AI-powered analysis."})]}),r.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 mb-16",children:[r.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl p-8 border border-white/10 hover:bg-white/10 transition-all duration-300",children:[r.jsx("div",{className:"bg-accent/20 w-12 h-12 rounded-lg flex items-center justify-center mb-4",children:r.jsx(F,{className:"w-6 h-6 text-accent"})}),r.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Free Platform Demo"}),r.jsx("p",{className:"text-primary-100",children:"Experience the complete Inspectana platform with real inspection data and comprehensive features."})]}),r.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl p-8 border border-white/10 hover:bg-white/10 transition-all duration-300",children:[r.jsx("div",{className:"bg-accent/20 w-12 h-12 rounded-lg flex items-center justify-center mb-4",children:r.jsx(F,{className:"w-6 h-6 text-accent"})}),r.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Custom Integration"}),r.jsx("p",{className:"text-primary-100",children:"Seamless integration with your existing insurance management systems and workflows."})]}),r.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl p-8 border border-white/10 hover:bg-white/10 transition-all duration-300",children:[r.jsx("div",{className:"bg-accent/20 w-12 h-12 rounded-lg flex items-center justify-center mb-4",children:r.jsx(F,{className:"w-6 h-6 text-accent"})}),r.jsx("h3",{className:"text-xl font-semibold mb-3",children:"ROI Analysis"}),r.jsx("p",{className:"text-primary-100",children:"Detailed business case and ROI analysis for your specific operational requirements."})]})]}),r.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-3xl p-8 md:p-12 border border-white/20",children:r.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl md:text-3xl font-bold mb-6",children:"Get Started in Minutes"}),r.jsx("p",{className:"text-lg text-primary-100 mb-8",children:"Don't let outdated inspection methods hold back your operations. Take the first step towards transformation with our intelligent platform."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("button",{onClick:()=>e(!0),className:"bg-accent text-white px-8 py-4 rounded-xl font-semibold text-lg hover:bg-accent-600 transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl",children:["Request Inspection",r.jsx(Se,{className:"w-5 h-5"})]}),r.jsxs("a",{href:"mailto:contact@inspectana.com",className:"border-2 border-white/30 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:bg-white/10 transition-all duration-300 flex items-center justify-center gap-2",children:[r.jsx(te,{className:"w-5 h-5"}),"Email Us"]})]})]}),r.jsxs("div",{className:"bg-white/5 rounded-2xl p-8 border border-white/10",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx(te,{className:"w-12 h-12 text-accent mx-auto mb-4"}),r.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Contact Information"}),r.jsx("p",{className:"text-primary-200 text-sm",children:"We're here to help you transform your inspection process"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-primary-100 font-medium text-lg mb-2",children:"contact@inspectana.com"}),r.jsx("p",{className:"text-primary-200",children:"For all inquiries, demos, and platform support"})]}),r.jsx("div",{className:"mt-8 pt-6 border-t border-white/20 text-center",children:r.jsxs("div",{className:"inline-flex items-center gap-2 bg-accent/20 rounded-full px-4 py-2",children:[r.jsx("div",{className:"w-2 h-2 bg-accent rounded-full animate-pulse"}),r.jsx("span",{className:"text-sm font-medium",children:"Response within 24 hours"})]})})]})]})})]})]}),r.jsx(Xe,{isOpen:n,onClose:()=>e(!1)})]})},zn=()=>{const n=e=>{const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})};return r.jsx("footer",{className:"bg-primary-800 text-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[r.jsxs("div",{className:"grid lg:grid-cols-4 md:grid-cols-2 gap-12",children:[r.jsxs("div",{className:"lg:col-span-2",children:[r.jsxs("div",{className:"flex flex-col items-start gap-4 mb-8 max-w-md",children:[r.jsx(It,{src:"/footer-logo.png",alt:"Inspectana Logo",className:"h-12 w-auto -ml-12",loading:"lazy"}),r.jsx("p",{className:"text-primary-200 max-w-md text-lg leading-relaxed",children:"Advanced drone inspection software for insurance companies. AI-powered analysis for 4 Point Inspections, Wind Mitigations, Roof Inspections, and Post Claim Inspections."})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"bg-primary-700/50 rounded-lg p-4 mb-2",children:r.jsx(pe,{className:"w-6 h-6 text-accent mx-auto"})}),r.jsx("p",{className:"text-xs text-primary-300",children:"Enterprise Grade"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"bg-primary-700/50 rounded-lg p-4 mb-2",children:r.jsx(ys,{className:"w-6 h-6 text-accent mx-auto"})}),r.jsx("p",{className:"text-xs text-primary-300",children:"AI-Powered"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"bg-primary-700/50 rounded-lg p-4 mb-2",children:r.jsx(Ye,{className:"w-6 h-6 text-accent mx-auto"})}),r.jsx("p",{className:"text-xs text-primary-300",children:"24/7 Support"})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-6 text-white",children:"Platform Features"}),r.jsxs("ul",{className:"space-y-4",children:[r.jsx("li",{children:r.jsxs("button",{onClick:()=>n("solution"),className:"text-primary-200 hover:text-accent transition-colors duration-200 flex items-center group text-left",children:[r.jsx("span",{className:"w-1 h-1 bg-accent rounded-full mr-3 group-hover:w-2 transition-all duration-200"}),"AI-Powered Analysis"]})}),r.jsx("li",{children:r.jsxs("button",{onClick:()=>n("solution"),className:"text-primary-200 hover:text-accent transition-colors duration-200 flex items-center group text-left",children:[r.jsx("span",{className:"w-1 h-1 bg-accent rounded-full mr-3 group-hover:w-2 transition-all duration-200"}),"Automated Reporting"]})}),r.jsx("li",{children:r.jsxs("button",{onClick:()=>n("solution"),className:"text-primary-200 hover:text-accent transition-colors duration-200 flex items-center group text-left",children:[r.jsx("span",{className:"w-1 h-1 bg-accent rounded-full mr-3 group-hover:w-2 transition-all duration-200"}),"System Integration"]})}),r.jsx("li",{children:r.jsxs("button",{onClick:()=>n("solution"),className:"text-primary-200 hover:text-accent transition-colors duration-200 flex items-center group text-left",children:[r.jsx("span",{className:"w-1 h-1 bg-accent rounded-full mr-3 group-hover:w-2 transition-all duration-200"}),"Real-time Analytics"]})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-6 text-white",children:"Get in Touch"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"bg-accent/10 p-2 rounded-lg flex-shrink-0",children:r.jsx(te,{className:"w-5 h-5 text-accent"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium mb-1",children:"Email"}),r.jsx("a",{href:"mailto:contact@inspectana.com",className:"text-primary-200 hover:text-accent transition-colors",children:"contact@inspectana.com"})]})]}),r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"bg-accent/10 p-2 rounded-lg flex-shrink-0",children:r.jsx(kt,{className:"w-5 h-5 text-accent"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium mb-1",children:"Headquarters"}),r.jsx("p",{className:"text-primary-200",children:"Cape Coral, Florida"}),r.jsx("p",{className:"text-primary-200",children:"United States"})]})]}),r.jsxs("div",{className:"bg-primary-700/30 rounded-lg p-4 border border-primary-600/30",children:[r.jsx("p",{className:"text-sm text-primary-200 mb-1",children:"Response Time"}),r.jsx("p",{className:"text-accent font-semibold",children:"Within 24 hours"})]})]})]})]}),r.jsx("div",{className:"border-t border-primary-700 mt-12 pt-8",children:r.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center gap-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[r.jsx("p",{className:"text-primary-300 text-sm",children:"© 2025 Inspectana. All rights reserved."}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-primary-400",children:[r.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),r.jsx("span",{children:"All systems operational"})]})]}),r.jsxs("div",{className:"flex flex-wrap justify-center gap-6",children:[r.jsx("button",{onClick:()=>n("contact"),className:"text-primary-300 hover:text-accent text-sm transition-colors duration-200 font-medium",children:"Get Demo"}),r.jsx("button",{onClick:()=>n("benefits"),className:"text-primary-300 hover:text-accent text-sm transition-colors duration-200 font-medium",children:"View Benefits"}),r.jsx("button",{onClick:()=>n("contact"),className:"text-primary-300 hover:text-accent text-sm transition-colors duration-200 font-medium",children:"Contact Us"})]})]})})]})})},ni=()=>r.jsxs("div",{className:"min-h-screen bg-neutral-100",children:[r.jsx(_s,{}),r.jsx(js,{}),r.jsx(Ns,{}),r.jsx(ks,{}),r.jsx(Ss,{}),r.jsx(Fn,{}),r.jsx(Mn,{}),r.jsx(zn,{})]});export{ni as default};
